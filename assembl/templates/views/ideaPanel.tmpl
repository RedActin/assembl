<div class="panel ideaPanel">
    <header class="panel-header">
        <strong data-tooltip="{{gettext('Detailled information about the currently selected idea in the Table of ideas')}}">{{ gettext('Idea') }}</strong>
        <div class="float-right">
            <% if( idea ) { %>
                {# Commented out, creates infinite loops
                <a href="#" id="session-modal">Create session</a>
                #}
            <% } %>
            <a id="ideaPanel-closebutton" class="iconbutton icon-cancel" data-tooltip="{{gettext('Close panel')}}"></a>
        </div>
    </header>

    <div class="panel-body">
        <% if( idea ) { %>
        <fieldset id="ideaPanel-section-summary" class="panel-section">
            <div id="ideaPanel-shorttitle" class="text-bold" data-tooltip="{{gettext('The name of this idea in the table of ideas')}}"></div>
            <div class="wrapper">
              <% if (canEditNextSynthesis) { %>
              <span>{{ gettext('Expression in next synthesis:') }}</span>
              <div id="ideaPanel-longtitle" data-tooltip="{{gettext('Expression of this idea in the next synthesis.  You may want to edit them all together in the synthesis panel rather than here.')}}"></div>
              <% } %>
            </div>
            <div class="wrapper">
              <span>{{ gettext('Definition of idea') }}</span>
              <div id="ideaPanel-definition" data-tooltip="{{gettext('A definition of this idea')}}"></div>
            </div>
            {#<p class="text-muted margin">{% set creationDate = "<%= app.formatDate(idea.get('creationDate')) %>" %}</p>#}

            <div class="subIdea-content">
             <div>
               <p>Sous-idées <a>voir moins</a></p>
             </div>
             <div class="subIdea-list">
              <ul>
                <% _.each(subIdeas, function(subIdea, i){ %>
                    <li class='subidea'><% print(subIdea.getShortTitleDisplayText()); %></li>
                <% }); %>
                <li>+ Proposer une nouvelle idée </li>
              </ul>
              <p>En manque dinspiration ? <a href="#">Decrouvrez notre module creativité</a> </p>
             </div>
             <div>
                <p>Voir les session de creativité passées: </p>
                <p> 26 Mars 2014 : Quel devrait être nos prochains developpement internationaux <a>Revoir la session</a>  </p>
             </div>
            </div>
            <div>
              <p>9 personnes echanges sur cette idée</p>
            </div>
            <div id="ideaPanel-comment"></div>
        </fieldset>
        
        {#
        <fieldset id="ideaPanel-section-subideas" class="panel-section">
            <legend data-tooltip="{{gettext('The children of this idea.')}}">
                <span><%= sprintf(i18n.pluralize({0:"{{ gettext('This idea has no sub-ideas') }}",1:"{{ gettext('This idea has %d sub-idea') }}",2:"{{ gettext('This idea has %d sub-ideas') }}"},segments.length), subIdeas.length) %></span>
            </legend>
            <div class="idealist">
                <% _.each(subIdeas, function(subIdea, i){ %>
                    <div class='subidea'><% print(subIdea.getShortTitleDisplayText()); %></div>
                <% }); %>
            </div>
        </fieldset>
        #}
        
        <fieldset id="ideaPanel-section-segments" class="panel-section">
            <legend data-tooltip="{{gettext('Expressions of this idea in segments of posts or on the web')}}">
                <span><%= sprintf(i18n.pluralize({0:"{{ gettext('No extracts were harvested for this idea') }}",1:"{{ gettext('Harvested in %d extract') }}",2:"{{ gettext('Harvested in %d extracts') }}"},segments.length), segments.length) %></span>
            </legend>
            <div class="postitlist">
                <% _.each(segments, function(segment, i){ %>
                    {% include "views/segment.tmpl" %}
                <% }); %>
            </div>
            <% if (canAddExtracts) { %>
            <div class="box box--dashed box--centered margin text-muted text-big">
                {{ gettext('Add extracts by dragging them in this panel from the clipboard or messages') }}
            </div>
            <% } %>
        </fieldset>

        <fieldset id="ideaPanel-section-actions" class="panel-section">
            <% if (canDelete) { %>
            <div class="float-right">
                <a id="ideaPanel-deleteButton" class="button" data-tooltip="{{gettext('Delete this idea completely')}}">{{ gettext('Delete idea') }}</a>
            </div>
            <% }
            if (canEditExtracts) { %>
            <a id="ideaPanel-clearbutton" class="button" data-tooltip="{{gettext('Remove all extracts from this idea.  Removed extracts will be available in your clipboard')}}">{{ gettext('Remove all extracts') }}</a>
            <% } %>
        </fieldset>
        <% } else { %>
            <div class="box box--centered margin  text-big">
                {{ gettext('Please select an idea in the table of ideas') }}
            </div>
        <% } %>
    </div>

</div>
